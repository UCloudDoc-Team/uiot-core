{{indexmenu_n>2}}

### 功能定义流程

##### 物模型定义流程
1. [注册](https://passport.ucloud.cn/#register)UCloud云服务，如已注册请直接第2步；
2. 登录进入UCloud[物联网平台](https://console.ucloud.cn/iot)；
3. 进行[物模型功能定义]()；
4. 参考[设备端开发-物模型]()，基于物模型进行开发；
5. 开发完成，设备端、应用服务基于物模型进行业务实现。



#### 物模型功能定义
物模型在控制台的表达是<功能定义>，提供完整的交互帮助用户进行物模型的抽象，快速的创建物模型。


##### 操作步骤
1. [注册](https://passport.ucloud.cn/#register)UCloud云服务，如已注册请直接第2步；
2. 登录进入UCloud[物联网平台](https://console.ucloud.cn/iot)；
3. 选择相应的产品，进入[产品详情]()；
4. 选择<已解锁>按钮；
   - 已解锁：表示当前可以编辑功能定义，一般在产品开发阶段；
   - 已锁定：表示当前不可以编辑功能定义，一般是产品开发完毕后；
5. 选择<功能定义>标签；
6. 点击<添加功能>，进行[属性]()，[命令]()，[事件]()定义。

<img src="https://ushare.ucloudadmin.com/download/attachments/17796824/%E5%8A%9F%E8%83%BD%E5%AE%9A%E4%B9%89.png?version=1&modificationDate=1560834399744&api=v2" width="900" />

##### 定义属性
定义属性主要是定义属性的名称、类型等，类似于基于对象编程中的成员变量，具有可读（GET）和可写（SET）的特性。
**操作步骤**
1. 点击<添加功能>后，选择<属性>标签；
2. 输入相应的属性内容：
   - 功能名称（必填）：属性的名称，功能名称同一产品下须唯一，如温度。==支持中文、大小写字母、数字、短划线、下划线和小数点，必须以中文、英文或数字开头，不超过30个字符。==
   - 标识符（必填）：类似于变量名，JSON文件中唯一标识该功能的标识符。==支持大小写字母、数字和下划线、不超过50个字符。==
   - 数据类型（必填）：
      - int：int32整数型
      - float32：32位浮点型
      - float64：64位浮点型
      - bool：布尔型
      - enum：枚举型
      - string：字符串
      - date：时间型，格式为int 类型的 UTC 时间戳，单位：毫秒
   - 取值范围（必填）：当数据类型为int、float32、float64时，需要填写取值范围，表示数据允许的范围。
   - 步长（必填）：当数据类型为int、float32、float64时，需要填写取值范围，表征属性变化的步进长度。
   - 布尔类型（必填）：当数据类型为bool类型时，填写0和1分别代表的内容。
   - 枚举项（必填）：当数据类型为enum时，分别填写枚举值和对应的描述。
   - 数据长度（必填）：当数据类型为string时，表示字符串的长度。
   - 读写类型（必填）：
     - 只读：请求只读的方法仅支持 GET（获取）。
     - 读写：请求读写的方法支持 GET（获取）和 SET（设置）。
   - 描述（选填）：对属性的描述。==中英文、数字和下划线组成，中文算2个字符，长度不大于200。==

<img src="https://ushare.ucloudadmin.com/download/attachments/17796824/%E5%91%BD%E4%BB%A4.png?version=1&modificationDate=1560834399850&api=v2" width="900" />

##### 定义命令
命令是指对设备进行下发控制并完成某个动作，命令控制可以理解为面向对象编程中的成员方法，有输入参数和输出参数，命令调用还有同步和异步调用，具体可以参考[云端开发指南]()。
<br><br>

注：初学者经常会困惑属性的SET和命令控制之间的区别，这里具体列下：
- 属性SET的是该属性类型的值；而命令是不依赖属性的；比如温度类型是int型，可以SET到30°，但是命令往往是一个动作，比如温度调低5°，这个是一个动作而不是一个具体值。
- 命令调用分为同步和异步两种，而属性SET均是异步的；
- 命令调用可以有输入参数和输出参数；比如对于智能门锁，“获取开门记录”，就需要输入参数-时间区间、人员ID等，输出参数-开门记录。

**操作步骤**
1. 点击<添加功能>后，选择<命令>标签；
2. 输入相应的命令内容：
   - 功能名称（必填）：命令的名称，功能名称同一产品下须唯一，如调低温度。==支持中文、大小写字母、数字、短划线、下划线和小数点，必须以中文、英文或数字开头，不超过30个字符；==
   - 标识符（必填）：类似于方法名，JSON文件中唯一标识该功能的标识符。==支持大小写字母、数字和下划线、不超过50个字符；==
   - 输入参数（选填）：点击<新增参数>，弹出<添加参数>弹框，参考下文[参数设置]()，==入参最多支持20个==；
   - 输出参数（选填）：点击<新增参数>，弹出<添加参数>弹框，参考下文[参数设置]()，==出参最多支持20个==；
   - 描述（选填）：对命令的描述。==中英文、数字和下划线组成，中文算2个字符，长度不大于200。==
   

<img src="https://ushare.ucloudadmin.com/download/attachments/17796824/%E5%91%BD%E4%BB%A4.png?version=1&modificationDate=1560834399850&api=v2" width="900" />

**参数设置**
1. 参数名称（必填）：入参或出参的名称。。==支持中文、大小写字母、数字、短划线、下划线和小数点，必须以中文、英文或数字开头，不超过30个字符；==
2. 标识符（必填）：类似于变量名，入参或出参在JSON文件中唯一标识该功能的标识符。==支持大小写字母、数字和下划线、不超过50个字符；==
3. 数据类型（必填）：      
    - int：int32整数型
    - float32：32位浮点型
    - float64：64位浮点型
    - bool：布尔型
    - enum：枚举型
    - string：字符串
    - date：时间型，格式为int 类型的 UTC 时间戳，单位：毫秒
4. 取值范围（必填）：当数据类型为int、float32、float64时，需要填写取值范围，表示数据允许的范围。
5. 步长（必填）：当数据类型为int、float32、float64时，需要填写取值范围，表征属性变化的步进长度。
6. 布尔类型（必填）：当数据类型为bool类型时，填写0和1分别代表的内容。
7. 枚举项（必填）：当数据类型为enum时，分别填写枚举值和对应的描述。
8. 数据长度（必填）：当数据类型为string时，表示字符串的长度。

<img src="https://ushare.ucloudadmin.com/download/attachments/17796824/%E6%B7%BB%E5%8A%A0%E5%8F%82%E6%95%B0.png?version=1&modificationDate=1560834400281&api=v2" width="900" />


##### 定义事件
事件一般是某类需要及时被外部感知的消息。事件以输出方式对外提供信息。事件上报有别于属性的GET，事件是指突发或者非常规情况，需要及时被感知，比如异常进入、高温报警、发动机故障；而属性的GET是对某个正常属性值的上报。

**操作步骤**
1. 点击<添加功能>后，选择<事件>标签；
2. 输入相应的事件内容：
   - 功能名称（必填）：事件的名称，功能名称同一产品下须唯一，如高温报警。==支持中文、大小写字母、数字、短划线、下划线和小数点，必须以中文、英文或数字开头，不超过30个字符；==
   - 标识符（必填）：JSON文件中唯一标识该功能的标识符。==支持大小写字母、数字和下划线、不超过50个字符；==
   - 事件类型（必填）：选择事件的具体类型，分为<通知>、<警告>、<故障>，会在JSON文件中表述为`notify, warning, error`不同的字符；
   - 输出参数（选填）：点击<新增参数>，弹出<添加参数>弹框，参考下文[参数设置]()，==出参最多支持20个==；
   - 描述（选填）：事件的描述。==中英文、数字和下划线组成，中文算2个字符，长度不大于200。==


<img src="https://ushare.ucloudadmin.com/download/attachments/17796824/%E4%BA%8B%E4%BB%B6.png?version=1&modificationDate=1560834399995&api=v2" width="900" />

**参数设置**
1. 参数名称（必填）：输出参数的名称。。==支持中文、大小写字母、数字、短划线、下划线和小数点，必须以中文、英文或数字开头，不超过30个字符；==
2. 标识符（必填）：类似于变量名，输出参数在JSON文件中唯一标识该功能的标识符。==支持大小写字母、数字和下划线、不超过50个字符；==
3. 数据类型（必填）：      
    - int：int32整数型
    - float32：32位浮点型
    - float64：64位浮点型
    - bool：布尔型
    - enum：枚举型
    - string：字符串
    - date：时间型，格式为int 类型的 UTC 时间戳，单位：毫秒
4. 取值范围（必填）：当数据类型为int、float32、float64时，需要填写取值范围，表示数据允许的范围。
5. 步长（必填）：当数据类型为int、float32、float64时，需要填写取值范围，表征属性变化的步进长度。
6. 布尔类型（必填）：当数据类型为bool类型时，填写0和1分别代表的内容。
7. 枚举项（必填）：当数据类型为enum时，分别填写枚举值和对应的描述。
8. 数据长度（必填）：当数据类型为string时，表示字符串的长度。


<img src="https://ushare.ucloudadmin.com/download/attachments/17796824/%E4%BA%8B%E4%BB%B6%E6%B7%BB%E5%8A%A0%E5%8F%82%E6%95%B0.png?version=1&modificationDate=1560834400103&api=v2" width="900" />
